var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _react=_interopRequireWildcard(require("react"));var _propTypes=_interopRequireDefault(require("prop-types"));var _reactNative=require("react-native");var _helper=require("./helper");var _excluded=["numberOfLines","style","wrapperStyle","children","seeMoreStyle","seeMoreText","seeLessStyle","seeLessText","animate","customTextComponent","ellipsis","allowFontScaling","onExpand","onCollapse","expandOnly","seeMoreOverlapCount","debounceSeeMoreCalc","onReady","seeMoreContainerStyleSecondary","onSeeMore","onSeeLess","debug","collapsed"];var _this=this,_jsxFileName="/home/runner/work/react-native-read-more/react-native-read-more/example/src/ReadMore.js";function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap(),t=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r;})(e);}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u];}return n.default=e,t&&t.set(e,n),n;}var globalAnimationEnabled=false;var enableGlobalLayoutAnimation=function enableGlobalLayoutAnimation(enable){if(!enable||globalAnimationEnabled){return;}globalAnimationEnabled=true;if(_reactNative.Platform.OS==='android'){if(_reactNative.UIManager.setLayoutAnimationEnabledExperimental){_reactNative.UIManager.setLayoutAnimationEnabledExperimental(true);}}};var readmoreAnimation=_reactNative.LayoutAnimation.create(300,_reactNative.LayoutAnimation.Types.easeOut,_reactNative.LayoutAnimation.Properties.opacity);var logClosure=function logClosure(printLogs){return function(){var _console;if(!printLogs){return;}return(_console=console).log.apply(_console,arguments);};};var ReadMore=function ReadMore(_ref){var _ref$numberOfLines=_ref.numberOfLines,numberOfLines=_ref$numberOfLines===void 0?3:_ref$numberOfLines,_ref$style=_ref.style,style=_ref$style===void 0?styles.defaultText:_ref$style,_ref$wrapperStyle=_ref.wrapperStyle,wrapperStyle=_ref$wrapperStyle===void 0?styles.container:_ref$wrapperStyle,children=_ref.children,_ref$seeMoreStyle=_ref.seeMoreStyle,seeMoreStyle=_ref$seeMoreStyle===void 0?_reactNative.StyleSheet.flatten([styles.defaultText,styles.seeMoreText]):_ref$seeMoreStyle,_ref$seeMoreText=_ref.seeMoreText,seeMoreText=_ref$seeMoreText===void 0?'See more':_ref$seeMoreText,_ref$seeLessStyle=_ref.seeLessStyle,seeLessStyle=_ref$seeLessStyle===void 0?_reactNative.StyleSheet.flatten([styles.defaultText,styles.seeLessText]):_ref$seeLessStyle,_ref$seeLessText=_ref.seeLessText,seeLessText=_ref$seeLessText===void 0?'See less':_ref$seeLessText,_ref$animate=_ref.animate,animate=_ref$animate===void 0?true:_ref$animate,_ref$customTextCompon=_ref.customTextComponent,TextComponent=_ref$customTextCompon===void 0?_reactNative.Text:_ref$customTextCompon,_ref$ellipsis=_ref.ellipsis,ellipsis=_ref$ellipsis===void 0?'...':_ref$ellipsis,_ref$allowFontScaling=_ref.allowFontScaling,allowFontScaling=_ref$allowFontScaling===void 0?_reactNative.Platform.select({android:false,ios:undefined}):_ref$allowFontScaling,_ref$onExpand=_ref.onExpand,onExpand=_ref$onExpand===void 0?function(){}:_ref$onExpand,_ref$onCollapse=_ref.onCollapse,onCollapse=_ref$onCollapse===void 0?function(){}:_ref$onCollapse,_ref$expandOnly=_ref.expandOnly,expandOnly=_ref$expandOnly===void 0?false:_ref$expandOnly,_ref$seeMoreOverlapCo=_ref.seeMoreOverlapCount,seeMoreOverlapCount=_ref$seeMoreOverlapCo===void 0?2:_ref$seeMoreOverlapCo,_ref$debounceSeeMoreC=_ref.debounceSeeMoreCalc,debounceSeeMoreCalc=_ref$debounceSeeMoreC===void 0?300:_ref$debounceSeeMoreC,_ref$onReady=_ref.onReady,onReady=_ref$onReady===void 0?function(){}:_ref$onReady,_ref$seeMoreContainer=_ref.seeMoreContainerStyleSecondary,seeMoreContainerStyleSecondary=_ref$seeMoreContainer===void 0?{}:_ref$seeMoreContainer,onSeeMoreBlocked=_ref.onSeeMore,onSeeLessBlocked=_ref.onSeeLess,_ref$debug=_ref.debug,debug=_ref$debug===void 0?false:_ref$debug,externalCollapsed=_ref.collapsed,restProps=(0,_objectWithoutProperties2.default)(_ref,_excluded);var _useState=(0,_react.useState)({}),_useState2=(0,_slicedToArray2.default)(_useState,2),additionalProps=_useState2[0],setAdditionalProps=_useState2[1];var _useState3=(0,_react.useState)([]),_useState4=(0,_slicedToArray2.default)(_useState3,2),hiddenTextLinesWithSeeLess=_useState4[0],setHiddenTextLinesWithSeeLess=_useState4[1];var _useState5=(0,_react.useState)(0),_useState6=(0,_slicedToArray2.default)(_useState5,2),textWidth=_useState6[0],setTextWidth=_useState6[1];var _useState7=(0,_react.useState)(''),_useState8=(0,_slicedToArray2.default)(_useState7,2),truncatedLineOfImpact=_useState8[0],setTruncatedLineOfImpact=_useState8[1];var _useState9=(0,_react.useState)(0),_useState10=(0,_slicedToArray2.default)(_useState9,2),truncatedLineOfImpactWidth=_useState10[0],setTruncatedLineOfImpactWidth=_useState10[1];var _useState11=(0,_react.useState)([]),_useState12=(0,_slicedToArray2.default)(_useState11,2),lines=_useState12[0],setLines=_useState12[1];var _useState13=(0,_react.useState)([]),_useState14=(0,_slicedToArray2.default)(_useState13,2),collapsedLines=_useState14[0],setCollapsedLines=_useState14[1];var _useState15=(0,_react.useState)(0),_useState16=(0,_slicedToArray2.default)(_useState15,2),seeMoreRightPadding=_useState16[0],setSeeMoreRightPadding=_useState16[1];var _useState17=(0,_react.useState)(false),_useState18=(0,_slicedToArray2.default)(_useState17,2),mountHiddenTextOne=_useState18[0],setMountHiddenTextOne=_useState18[1];var _useState19=(0,_react.useState)(false),_useState20=(0,_slicedToArray2.default)(_useState19,2),mountHiddenTextTwo=_useState20[0],setMountHiddenTextTwo=_useState20[1];var _useState21=(0,_react.useState)(false),_useState22=(0,_slicedToArray2.default)(_useState21,2),mountHiddenTextThree=_useState22[0],setMountHiddenTextThree=_useState22[1];var _useState23=(0,_react.useState)(false),_useState24=(0,_slicedToArray2.default)(_useState23,2),mountHiddenTextFour=_useState24[0],setMountHiddenTextFour=_useState24[1];var _useState25=(0,_react.useState)(false),_useState26=(0,_slicedToArray2.default)(_useState25,2),mountHiddenTextFive=_useState26[0],setMountHiddenTextFive=_useState26[1];var _useState27=(0,_react.useState)(false),_useState28=(0,_slicedToArray2.default)(_useState27,2),mountHiddenTextSix=_useState28[0],setMountHiddenTextSix=_useState28[1];var _useState29=(0,_react.useState)(false),_useState30=(0,_slicedToArray2.default)(_useState29,2),isMeasured=_useState30[0],setIsMeasured=_useState30[1];var _useState31=(0,_react.useState)(false),_useState32=(0,_slicedToArray2.default)(_useState31,2),isReady=_useState32[0],setIsReady=_useState32[1];var _useState33=(0,_react.useState)(false),_useState34=(0,_slicedToArray2.default)(_useState33,2),seeMore=_useState34[0],setSeeMore=_useState34[1];var _useState35=(0,_react.useState)(true),_useState36=(0,_slicedToArray2.default)(_useState35,2),collapsed=_useState36[0],setCollapsed=_useState36[1];var _useState37=(0,_react.useState)(true),_useState38=(0,_slicedToArray2.default)(_useState37,2),afterCollapsed=_useState38[0],setAfterCollapsed=_useState38[1];var _useState39=(0,_react.useState)(null),_useState40=(0,_slicedToArray2.default)(_useState39,2),collapsedChildren=_useState40[0],setCollapsedChildren=_useState40[1];var _useState41=(0,_react.useState)(''),_useState42=(0,_slicedToArray2.default)(_useState41,2),reconciledLineOfImpact=_useState42[0],setReconciledLineOfImpact=_useState42[1];var _useState43=(0,_react.useState)(0),_useState44=(0,_slicedToArray2.default)(_useState43,2),reconciledLineOfImpactWidth=_useState44[0],setReconciledLineOfImpactWidth=_useState44[1];var _useState45=(0,_react.useState)(0),_useState46=(0,_slicedToArray2.default)(_useState45,2),seeMoreWidth=_useState46[0],setSeeMoreWidth=_useState46[1];var _useState47=(0,_react.useState)(false),_useState48=(0,_slicedToArray2.default)(_useState47,2),hideEllipsis=_useState48[0],setHideEllipsis=_useState48[1];var log=(0,_react.useCallback)(logClosure(debug),[debug]);var onSeeMoreViewLayout=(0,_react.useCallback)(function(_ref2){var width=_ref2.nativeEvent.layout.width;setSeeMoreWidth(width);},[setSeeMoreWidth]);var onTextLayoutOne=(0,_react.useCallback)(function(_ref3){var _lines=_ref3.nativeEvent.lines;setLines(_lines);setMountHiddenTextOne(false);setMountHiddenTextTwo(true);},[setLines,setMountHiddenTextOne]);var onTextLayoutTwo=(0,_react.useCallback)(function(_ref4){var _lines=_ref4.nativeEvent.lines;setHiddenTextLinesWithSeeLess(_lines);setMountHiddenTextTwo(false);setMountHiddenTextThree(true);},[setHiddenTextLinesWithSeeLess,setMountHiddenTextTwo,setMountHiddenTextThree]);var onLayoutHiddenTextThree=(0,_react.useCallback)(function(event){var _event$nativeEvent,_event$nativeEvent$la;var _event=event;var _width=(_event==null?void 0:(_event$nativeEvent=_event.nativeEvent)==null?void 0:(_event$nativeEvent$la=_event$nativeEvent.layout)==null?void 0:_event$nativeEvent$la.width)||0;setTextWidth(_width);setMountHiddenTextThree(false);},[setTextWidth,setMountHiddenTextThree]);var onTextLayoutHiddenTextThree=(0,_react.useCallback)(function(event){var _event=event;if(collapsed){var _event$nativeEvent2;var _lines=(_event==null?void 0:(_event$nativeEvent2=_event.nativeEvent)==null?void 0:_event$nativeEvent2.lines)||[];setCollapsedLines(_lines);}},[setCollapsedLines,collapsed]);var onLayoutFour=(0,_react.useCallback)(function(_ref5){var width=_ref5.nativeEvent.layout.width;setTruncatedLineOfImpactWidth(width);setMountHiddenTextFour(false);setMountHiddenTextFive(true);},[setTruncatedLineOfImpactWidth,setMountHiddenTextFour,setMountHiddenTextFive]);var onLayoutHiddenTextFive=(0,_react.useCallback)(function(){setMountHiddenTextFive(false);setMountHiddenTextSix(true);},[setMountHiddenTextFive,setMountHiddenTextSix]);var onTextLayoutHiddenTextFive=(0,_react.useCallback)(function(_ref6){var _lineOfImpact$text;var _lines=_ref6.nativeEvent.lines;var _lineOfImpact=_lines[numberOfLines-1];setReconciledLineOfImpact((_lineOfImpact==null?void 0:(_lineOfImpact$text=_lineOfImpact.text)==null?void 0:_lineOfImpact$text.trimEnd==null?void 0:_lineOfImpact$text.trimEnd())||'');},[numberOfLines,setReconciledLineOfImpact]);var onLayoutHiddenTextSix=(0,_react.useCallback)(function(_ref7){var width=_ref7.nativeEvent.layout.width;setMountHiddenTextSix(false);setReconciledLineOfImpactWidth(reconciledLineOfImpact?width:0);},[setReconciledLineOfImpactWidth,setMountHiddenTextSix,reconciledLineOfImpact]);var onPressSeeLess=(0,_react.useCallback)(function(){if(collapsed){log('Already collapsed');return;}if(onSeeLessBlocked){log('toggle blocked explicitly via prop onSeeLess');return onSeeLessBlocked();}var isExternalCollapsedDefined=typeof externalCollapsed==='boolean';if(isExternalCollapsedDefined){log('toggle handled externally via collapsed prop');return;}setCollapsed(true);},[collapsed,setCollapsed,onSeeLessBlocked,externalCollapsed]);var onPressSeeMore=(0,_react.useCallback)(function(){if(!collapsed){log('Already expanded');return;}if(onSeeMoreBlocked){log('toggle blocked explicitly via prop onSeeMore');return onSeeMoreBlocked();}var isExternalCollapsedDefined=typeof externalCollapsed==='boolean';if(isExternalCollapsedDefined){log('toggle handled externally via collapsed prop');return;}setCollapsed(false);},[collapsed,setCollapsed,onSeeMoreBlocked,externalCollapsed]);var updateLineOfImpact=(0,_react.useCallback)(function(){var _text=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var resetCollapsedChildren=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;setHideEllipsis(!(_text!=null&&_text.length));setTruncatedLineOfImpact(_text||'');if(!(_text!=null&&_text.length)){setTruncatedLineOfImpactWidth(0);setReconciledLineOfImpactWidth(0);setSeeMoreRightPadding(0);setIsMeasured(true);}if(resetCollapsedChildren){setCollapsedChildren(null);}},[setHideEllipsis,setTruncatedLineOfImpact,setTruncatedLineOfImpactWidth,setCollapsedChildren,setIsMeasured]);var measureSeeMoreLine=(0,_react.useCallback)(function(){var _lineOfImpact2,_lineOfImpact2$text,_lineOfImpact3,_lineOfImpact3$text,_charactersBeforeSeeM,_trimmedText$substr,_getTextByChildren,_getTextByChildren$ma;if(numberOfLines<1||!lines.length||!collapsedLines.length||!seeMore||!seeMoreWidth){log('terminating measurements for see more - 1');return;}if(!lines[numberOfLines-1]||!collapsedLines[numberOfLines-1]){log('terminating measurements for see more - 2');return;}var _lineOfImpact=lines[numberOfLines-1];_lineOfImpact.index=numberOfLines-1;if(_reactNative.Platform.OS==='ios'){var modifiedIndex=lines.findIndex(function(_line,index){var _line$text;if(index<numberOfLines-1||!((_line$text=_line.text)!=null&&_line$text.trimEnd!=null&&_line$text.trimEnd())){return false;}return collapsedLines[numberOfLines-1].text.includes(_line.text);});if(modifiedIndex!==-1){_lineOfImpact=lines[modifiedIndex];_lineOfImpact.index=modifiedIndex;}}var _trimmedText=(_lineOfImpact2=_lineOfImpact)==null?void 0:(_lineOfImpact2$text=_lineOfImpact2.text)==null?void 0:_lineOfImpact2$text.trimEnd==null?void 0:_lineOfImpact2$text.trimEnd();if(_trimmedText!=null&&_trimmedText.length&&!textWidth){return;}log('case 1');if(!(_trimmedText!=null&&_trimmedText.length)){return updateLineOfImpact(_trimmedText);}var availableWidth=textWidth-seeMoreWidth;log('case 2');if(_lineOfImpact.width<availableWidth){return updateLineOfImpact(_trimmedText);}var seeMoreTextLength=(ellipsis+" "+seeMoreText).length+seeMoreOverlapCount;log('case 3');var spaceDifference=((_lineOfImpact3=_lineOfImpact)==null?void 0:(_lineOfImpact3$text=_lineOfImpact3.text)==null?void 0:_lineOfImpact3$text.length)-(_trimmedText==null?void 0:_trimmedText.length);if(spaceDifference>=seeMoreTextLength){return updateLineOfImpact(_trimmedText);}log('case 4');var linesTillImpact=Array(_lineOfImpact.index+1).fill({}).map(function(_e,index){return lines[index];});var charactersBeforeSeeMore=(0,_helper.linesToCharacters)(linesTillImpact);var charactersLengthTillSeeMore=(charactersBeforeSeeMore==null?void 0:charactersBeforeSeeMore.trimEnd==null?void 0:(_charactersBeforeSeeM=charactersBeforeSeeMore.trimEnd())==null?void 0:_charactersBeforeSeeM.length)||0;var textBreakPosition=charactersLengthTillSeeMore-seeMoreTextLength;var _truncatedText=(_trimmedText==null?void 0:(_trimmedText$substr=_trimmedText.substr(0,_trimmedText.length-seeMoreTextLength))==null?void 0:_trimmedText$substr.trimEnd==null?void 0:_trimmedText$substr.trimEnd())||'';var charactersToTraverse=textBreakPosition;var nodeFound=false;var modifiedChildrenObjects=(_getTextByChildren=(0,_helper.getTextByChildren)(children,TextComponent))==null?void 0:(_getTextByChildren$ma=_getTextByChildren.map(function(_childObject){if(nodeFound){return _childObject;}if(_childObject.content.length>charactersToTraverse){nodeFound=true;var childContent=(0,_helper.insertAt)(_childObject.content,'\n',charactersToTraverse);return{type:_childObject==null?void 0:_childObject.type,content:childContent,child:(_childObject==null?void 0:_childObject.type)==='string'?childContent:_react.default.cloneElement(_childObject,_childObject.props,childContent)};}charactersToTraverse=charactersToTraverse-_childObject.content.length;return _childObject;}))==null?void 0:_getTextByChildren$ma.map(function(_updatedObjects){return _updatedObjects.child;});if(nodeFound){setCollapsedChildren(modifiedChildrenObjects);return updateLineOfImpact(_truncatedText,false);}return updateLineOfImpact(_trimmedText);},[numberOfLines,lines,collapsedLines,seeMore,textWidth,seeMoreWidth,ellipsis,seeMoreText,seeMoreOverlapCount,children,TextComponent,updateLineOfImpact,log]);var textProps=afterCollapsed?{numberOfLines:numberOfLines,ellipsizeMode:'clip'}:{};var commonHiddenComponentProps=(0,_extends2.default)({},additionalProps,{style:_reactNative.StyleSheet.flatten([Array.isArray(style)?_reactNative.StyleSheet.flatten(style):style,styles.hiddenTextAbsolute])});var hiddenComponentPropsLineOfImpact=(0,_extends2.default)({},additionalProps,{style:_reactNative.StyleSheet.flatten([Array.isArray(style)?_reactNative.StyleSheet.flatten(style):style,styles.hiddenTextAbsoluteCompact])});var seeMoreTextHidingStyle=!isMeasured?styles.transparentColor:styles.transparentBackground;var seeMoreContainerStyle=[hideEllipsis?styles.seeMoreContainerEllpisisHidden:styles.seeMoreContainer,{marginRight:seeMoreRightPadding}];(0,_react.useEffect)(function(){var _seeMore=lines.length>numberOfLines;setSeeMore(_seeMore);if(!(lines!=null&&lines.length)){return;}if(!_seeMore){log('no measurement is needed');onReady({canExpand:_seeMore,expandedLinesCount:lines.length});}},[numberOfLines,lines]);(0,_react.useEffect)(function(){if(collapsed===afterCollapsed){return;}var callback=collapsed?onCollapse:onExpand;if(animate){_reactNative.LayoutAnimation.configureNext(readmoreAnimation,callback);}else{callback();}setAfterCollapsed(collapsed);},[collapsed]);(0,_react.useEffect)(function(){var handle=setTimeout(function(){setMountHiddenTextOne(true);},debounceSeeMoreCalc);return function(){return clearTimeout(handle);};},[numberOfLines,style,wrapperStyle,children,seeMoreStyle,seeMoreText,seeLessStyle,seeLessText,ellipsis,additionalProps]);(0,_react.useEffect)(function(){var _additionalProps={};if(allowFontScaling!==undefined){_additionalProps.allowFontScaling=allowFontScaling;}setAdditionalProps(_additionalProps);},[allowFontScaling]);(0,_react.useEffect)(function(){if(mountHiddenTextTwo&&!seeMoreWidth&&collapsedLines!=null&&collapsedLines.length){return;}var handle=setTimeout(measureSeeMoreLine,debounceSeeMoreCalc);return function(){return clearTimeout(handle);};},[mountHiddenTextTwo,seeMoreWidth,collapsedLines,textWidth]);(0,_react.useEffect)(function(){if(!truncatedLineOfImpact){return;}setMountHiddenTextFour(true);},[truncatedLineOfImpact]);(0,_react.useEffect)(function(){if(!(truncatedLineOfImpactWidth||reconciledLineOfImpactWidth)||!seeMoreWidth||!textWidth){return;}var _width=reconciledLineOfImpactWidth||truncatedLineOfImpactWidth||0;var _seeMoreRightPadding=textWidth-_width-seeMoreWidth;_seeMoreRightPadding=_seeMoreRightPadding<0?0:_seeMoreRightPadding;setSeeMoreRightPadding(_seeMoreRightPadding);setIsMeasured(true);},[truncatedLineOfImpactWidth,reconciledLineOfImpactWidth,seeMoreWidth,textWidth]);(0,_react.useEffect)(function(){if(!isMeasured||isReady){return;}var handle=setTimeout(function(){setIsReady(true);onReady({canExpand:seeMore,expandedLinesCount:lines.length});},debounceSeeMoreCalc);return function(){return clearTimeout(handle);};},[isMeasured,isReady]);(0,_react.useEffect)(function(){var isExternalCollapsedDefined=typeof externalCollapsed==='boolean';var collapsedStateDifferent=externalCollapsed!==collapsed;if(isExternalCollapsedDefined&&collapsedStateDifferent&&isReady){log("Setting collapsed to "+externalCollapsed+" extenrally via collapsed prop");setCollapsed(externalCollapsed);}},[externalCollapsed,collapsed,isReady]);(0,_react.useState)(function(){enableGlobalLayoutAnimation(animate);},[animate]);return _react.default.createElement(_reactNative.View,{style:wrapperStyle,__self:_this,__source:{fileName:_jsxFileName,lineNumber:610,columnNumber:5}},mountHiddenTextOne&&_react.default.createElement(TextComponent,(0,_extends2.default)({},commonHiddenComponentProps,{onTextLayout:onTextLayoutOne,__self:_this,__source:{fileName:_jsxFileName,lineNumber:613,columnNumber:9}}),children||''),mountHiddenTextTwo&&_react.default.createElement(TextComponent,(0,_extends2.default)({},commonHiddenComponentProps,{onTextLayout:onTextLayoutTwo,__self:_this,__source:{fileName:_jsxFileName,lineNumber:621,columnNumber:9}}),children||'',"   "+seeLessText),mountHiddenTextFour&&_react.default.createElement(TextComponent,(0,_extends2.default)({},hiddenComponentPropsLineOfImpact,{onLayout:onLayoutFour,__self:_this,__source:{fileName:_jsxFileName,lineNumber:631,columnNumber:9}}),truncatedLineOfImpact),mountHiddenTextThree&&_react.default.createElement(TextComponent,(0,_extends2.default)({},commonHiddenComponentProps,{numberOfLines:numberOfLines,ellipsizeMode:'clip',onLayout:onLayoutHiddenTextThree,onTextLayout:onTextLayoutHiddenTextThree,__self:_this,__source:{fileName:_jsxFileName,lineNumber:638,columnNumber:9}}),children||''),mountHiddenTextFive&&_react.default.createElement(TextComponent,(0,_extends2.default)({},commonHiddenComponentProps,{numberOfLines:numberOfLines+1,onLayout:onLayoutHiddenTextFive,onTextLayout:onTextLayoutHiddenTextFive,__self:_this,__source:{fileName:_jsxFileName,lineNumber:649,columnNumber:9}}),collapsedChildren||''),mountHiddenTextSix&&_react.default.createElement(TextComponent,(0,_extends2.default)({},hiddenComponentPropsLineOfImpact,{onLayout:onLayoutHiddenTextSix,__self:_this,__source:{fileName:_jsxFileName,lineNumber:660,columnNumber:9}}),reconciledLineOfImpact),_react.default.createElement(TextComponent,(0,_extends2.default)({},additionalProps,restProps,{style:style},textProps,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:667,columnNumber:7}}),seeMore&&collapsed?collapsedChildren||children||'':children||'',seeMore&&!collapsed&&!expandOnly&&_react.default.createElement(TextComponent,(0,_extends2.default)({},additionalProps,restProps,{onPress:onPressSeeLess,style:seeLessStyle,__self:_this,__source:{fileName:_jsxFileName,lineNumber:676,columnNumber:11}}),hiddenTextLinesWithSeeLess.length>lines.length?'\n':' ',seeLessText)),seeMore&&collapsed&&afterCollapsed&&_react.default.createElement(_reactNative.View,{style:[seeMoreContainerStyle,seeMoreContainerStyleSecondary],onLayout:onSeeMoreViewLayout,__self:_this,__source:{fileName:_jsxFileName,lineNumber:688,columnNumber:9}},!hideEllipsis&&_react.default.createElement(TextComponent,(0,_extends2.default)({key:isMeasured+"-"+hideEllipsis},additionalProps,restProps,{onPress:onPressSeeMore,style:[style,seeMoreTextHidingStyle,hideEllipsis?styles.transparentColor:{}],__self:_this,__source:{fileName:_jsxFileName,lineNumber:692,columnNumber:13}}),ellipsis+" "),_react.default.createElement(TextComponent,(0,_extends2.default)({},additionalProps,restProps,{onPress:onPressSeeMore,style:[style,seeMoreStyle,seeMoreTextHidingStyle],__self:_this,__source:{fileName:_jsxFileName,lineNumber:705,columnNumber:11}}),seeMoreText)));};var styles=_reactNative.StyleSheet.create({container:{width:'100%',overflow:'hidden',position:'relative'},hiddenTextAbsolute:{position:'absolute',left:0,right:0,top:0,color:'transparent'},hiddenTextAbsoluteCompact:{position:'absolute',left:0,top:0,color:'transparent'},seeMoreContainer:{position:'absolute',right:0,bottom:0,flexDirection:'row'},seeMoreContainerEllpisisHidden:{position:'absolute',left:0,bottom:0,flexDirection:'row'},seeMoreButton:{flexDirection:'row'},defaultText:{},seeMoreText:{color:'red',fontWeight:'bold'},seeLessText:{color:'red',fontWeight:'bold'},transparentBackground:{backgroundColor:'transparent'},transparentColor:{color:'transparent'},hiddenEllpisisText:{color:'transparent',position:'absolute'}});ReadMore.propTypes={seeMoreStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.array]),seeLessStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.array]),wrapperStyle:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.array]),seeMoreText:_propTypes.default.string,seeLessText:_propTypes.default.string,animate:_propTypes.default.bool,customTextComponent:_propTypes.default.oneOfType([_propTypes.default.node,_propTypes.default.element,_propTypes.default.elementType]),ellipsis:_propTypes.default.string,onExpand:_propTypes.default.func,onCollapse:_propTypes.default.func,expandOnly:_propTypes.default.bool,seeMoreOverlapCount:_propTypes.default.number,debounceSeeMoreCalc:_propTypes.default.number,onReady:_propTypes.default.func,seeMoreContainerStyleSecondary:_propTypes.default.object,onSeeMore:_propTypes.default.func,onSeeLess:_propTypes.default.func,debug:_propTypes.default.bool,collapsed:_propTypes.default.bool};var _default=exports.default=(0,_react.memo)(ReadMore);